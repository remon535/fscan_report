(()=>{var n={351:()=>{layui.define(["form","layer","laydate","upload","element","base"],(function(n){"use strict";var e=layui.form,a=void 0===parent.layer?layui.layer:top.layer,o=layui.laydate,t=layui.upload,i=(layui.element,layui.base),r=layui.$,l={edit:function(n,e=0,a=0,o=0,t=[],r=null,c=!1){var s=e>0?"修改":"新增";i.isEmpty(n)?s+="内容":s+=n;var u=cUrl+"/edit/"+e;if(Array.isArray(t))for(var f in t)u+="?"+t[f];l.showWin(s,u,a,o,t,2,[],(function(n,e){r&&r(n,e)}),c)},detail:function(n,e,a=0,o=0,t=!1){var i=cUrl+"/detail/"+e;l.showWin(n+"详情",i,a,o,[],2,[],null,t)},cache:function(n){var e=cUrl+"/cache";l.ajaxPost(e,{id:n},(function(n,e){}))},copy:function(n,e,a=0,o=0){var t=cUrl+"/copy/"+e;l.showWin(n+"复制",t,a,o)},delete:function(n,e=null){a.confirm("您确定要删除吗？删除后将无法恢复！",{icon:3,skin:"layer-ext-moon",btn:["确认","取消"]},(function(o){var t=cUrl+"/delete/"+n;console.log(t),l.ajaxPost(t,{},(function(n,t){e&&(a.close(o),e(n,t))}),"正在删除。。。","delete")}))},batchFunc:function(n,e=null,o="POST"){var t=n.url,i=n.title,r=(n.form,n.confirm||!1),c=n.show_tips||"处理中...",s=n.data||[],u=n.param||[],f=n.type||"POST";if("导出数据"!=i&&0==s.length)return a.msg("请选择数据",{icon:5}),!1;var d=[];for(var m in s)d.push(s[m].id);var p=d.join(","),y={};if(y.id=p,Array.isArray(u))for(var m in u){var v=u[m].split("=");y[v[0]]=v[1]}console.log(y),r?a.confirm("您确定要【"+i+"】选中的数据吗？",{icon:3,title:"提示信息"},(function(n){"POST"==f||"PUT"==f||"DELETE"==f?t.indexOf("/delete")>=0?l.ajaxPost(t+"/"+p,{},e,c,o):l.ajaxPost(t,y,e,c,o):l.ajaxGet(t+"/"+p,{},e,c)})):"POST"==f?l.ajaxPost(t,y,e,c):l.ajaxGet(t+"/"+p,{},e,c)},verify:function(){e.verify({number:[/^[0-9]*$/,"请输入数字"],username:function(n,e){return new RegExp("^[a-zA-Z0-9_一-龥\\s·]+$").test(n)?/(^\_)|(\__)|(\_+$)/.test(n)?title+"首尾不能出现下划线'_'":/^\d+\d+\d$/.test(n)?title+"不能全为数字":void 0:title+"不能含有特殊字符"},pass:[/^[\S]{6,12}$/,"密码必须6到12位，且不能出现空格"]})},submitForm:function(n,e=null,a=null,o=!0){var t=[],c=[],s=n;if(r.each(s,(function(n,e){if(console.log(n+":"+e),/\[|\]|【|】/g.test(n)){var a=n.match(/\[(.+?)\]/g);e=n.match("\\[(.+?)\\]")[1];var o=n.replace(a,"");r.inArray(o,t)<0&&t.push(o),c[o]||(c[o]=[]),c[o].push(e)}})),console.log(s),console.log(t),console.log(c),r.each(t,(function(n,e){var a=[];r.each(c[e],(function(n,o){a.push(o),delete s[e+"["+o+"]"]})),s[e]=a.join(",")})),null==e){e=cUrl;var u="POST",f=r("form").attr("action");i.isEmpty(f)?null!=n.id&&(0==n.id?(e+="/add",u="POST"):n.id>0&&(e+="/update",u="PUT")):e=f}console.log(s);var d=new FormData;r.each(s,(function(n,e){d.append(n,e),console.log(n+","+e)})),console.log(d),l.ajaxPost(e,d,(function(n,e){if(e)return o&&setTimeout((function(){var n=parent.layer.getFrameIndex(window.name);parent.layer.close(n)}),500),a&&a(n,e),!1}),"数据提交中...",u)},searchForm:function(n,e,a="tableList"){n.reload(a,{page:{curr:1},where:e.field})},initDate:function(n,e=null){if(Array.isArray(n))for(var a in n){var t=n[a].split("|");if(t[2])var i=t[2].split(",");var r={};if(r.elem="#"+t[0],r.type=t[1],r.theme="molv",r.range="true"===t[3]||t[3],r.calendar=!0,r.show=!1,r.position="absolute",r.trigger="click",r.btns=["clear","now","confirm"],r.mark={"0-06-25":"生日","0-12-31":"跨年"},r.ready=function(n){},r.change=function(n,e,a){},r.done=function(n,a,o){e&&e(n,a)},i){var l=i[0];if(l){var c=!isNaN(l);r.min=c?parseInt(l):l}var s=i[1];if(s){var u=!isNaN(s);r.max=u?parseInt(s):s}}o.render(r)}},showWin:function(n,e,a=0,o=0,t=[],i=2,l=[],c=null,s=!1){var u=layui.layer.open({title:n,type:i,area:[a+"px",o+"px"],content:e,shadeClose:s,shade:.4,skin:"layui-layer-admin",success:function(n,e){if(Array.isArray(t))for(var a in t){var o=t[a].split("=");layui.layer.getChildFrame("body",e).find("#"+o[0]).val(o[1])}c&&c(e,1)},end:function(){c(u,2)}});0==a&&(layui.layer.full(u),r(window).on("resize",(function(){layui.layer.full(u)})))},ajaxPost:function(n,e,o=null,t="处理中,请稍后...",i="POST"){var l=null;r.ajax({type:i,url:n,data:e,dataType:"json",contentType:!1,processData:!1,beforeSend:function(){l=a.msg(t,{icon:16,shade:.01,time:0})},success:function(n){if(0!=n.code)return a.close(l),a.msg(n.msg,{icon:5}),!1;a.msg(n.msg,{icon:1,time:500},(function(){a.close(l),o&&o(n,!0)}))},error:function(){a.close(l),a.msg("AJAX请求异常"),o&&o(null,!1)}})},ajaxGet:function(n,e,o=null,t="处理中,请稍后..."){var i=null;r.ajax({type:"GET",url:n,data:e,contentType:"application/json",dataType:"json",beforeSend:function(){i=a.msg(t,{icon:16,shade:.01,time:0})},success:function(n){if(0!=n.code)return a.msg(n.msg,{icon:5}),!1;a.msg(n.msg,{icon:1,time:500},(function(){a.close(i),o&&o(n,!0)}))},error:function(){a.msg("AJAX请求异常"),o&&o(null,!1)}})},formSwitch:function(n,a="",o=null,t="处理中,请稍后...",r="PUT"){e.on("switch("+n+")",(function(e){var c=this.checked?"1":"2";i.isEmpty(a)&&(a=cUrl+"/"+n);var s={};s.id=this.value,s[n]=c;var u=JSON.stringify(s);JSON.parse(u),console.log(s);var f=new FormData;f.append("id",this.value),f.append(n,c),console.log(f),l.ajaxPost(a,f,(function(n,e){o&&o(n,e)}),t,r)}))},uploadFile:function(n,e=null,o="",r="xls|xlsx",l=10240,c={}){i.isEmpty(o)&&(o=cUrl+"/uploadFile"),t.render({elem:"#"+n,url:o,auto:!1,exts:r,accept:"file",size:l,method:"post",data:c,before:function(n){a.msg("上传并处理中。。。",{icon:16,shade:.01,time:0})},done:function(n){return a.closeAll(),0==n.code?a.alert(n.msg,{title:"上传反馈",skin:"layui-layer-molv",closeBtn:1,anim:0,btn:["确定","取消"],icon:6,yes:function(){e&&e(n,!0)},btn2:function(){}}):a.msg(n.msg,{icon:5}),!1},error:function(){return a.msg("数据请求异常")}})}};n("common",l)}))}},e={};!function a(o){var t=e[o];if(void 0!==t)return t.exports;var i=e[o]={exports:{}};return n[o](i,i.exports,a),i.exports}(351)})();